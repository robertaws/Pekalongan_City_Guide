Index: app/src/main/java/com/binus/pekalongancityguide/Layout/ProfileFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.binus.pekalongancityguide.Layout;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.binus.pekalongancityguide.R;\r\nimport com.binus.pekalongancityguide.databinding.FragmentProfileBinding;\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport static android.app.Activity.RESULT_OK;\r\n\r\npublic class ProfileFragment extends Fragment {\r\n    Button logout;\r\n    FragmentProfileBinding binding;\r\n    private FirebaseAuth firebaseAuth;\r\n    private static final String TAG = \"PROFILE_TAG\";\r\n    private static final int PICK_IMAGE_REQUEST = 1;\r\n    ImageView profileImageView;\r\n    StorageReference storageRef;\r\n    DatabaseReference imageRef;\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        binding = FragmentProfileBinding.inflate(inflater, container, false);\r\n        View view = binding.getRoot();\r\n        logout = view.findViewById(R.id.logout_btn);\r\n\r\n        // Retrieve a reference to the Firebase Storage\r\n        FirebaseStorage storage = FirebaseStorage.getInstance();\r\n        StorageReference storageRef = storage.getReference();\r\n\r\n        // Retrieve a reference to the Firebase Realtime Database\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference imageRef = database.getReference(\"image\");\r\n\r\n        // Retrieve the current profile image from Firebase Storage and display it in the ImageView\r\n        ImageView profileImageView = view.findViewById(R.id.profileImg);\r\n        storageRef.child(\"images/profile.jpg\").getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n            @Override\r\n            public void onSuccess(Uri uri) {\r\n                Picasso.get().load(uri).into(profileImageView);\r\n            }\r\n        });\r\n\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        getInfo();\r\n\r\n        // Set OnClickListener for the profile image\r\n        profileImageView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Open an image selection activity or dialog\r\n                Intent intent = new Intent();\r\n                intent.setType(\"image/*\");\r\n                intent.setAction(Intent.ACTION_GET_CONTENT);\r\n                startActivityForResult(Intent.createChooser(intent, \"Select Profile Image\"), PICK_IMAGE_REQUEST);\r\n            }\r\n        });\r\n\r\n        binding.editName.setOnClickListener(v -> {\r\n            //\r\n        });\r\n\r\n        binding.logoutBtn.setOnClickListener(v -> {\r\n            startActivity(new Intent(getActivity(), MainActivity.class));\r\n            getActivity().finish();\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    private void handleImageSelectionResult(Intent data) {\r\n        if (data == null || data.getData() == null) {\r\n            // No image was selected\r\n            return;\r\n        }\r\n\r\n        // Get the selected image URI\r\n        Uri imageUri = data.getData();\r\n\r\n        // Display the selected image in the ImageView\r\n        Picasso.get().load(imageUri).into(profileImageView);\r\n    }\r\n\r\n    private void getInfo() {\r\n        Log.e(TAG, \"Loading User Info...\" + firebaseAuth.getUid());\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance(\"https://pekalongan-city-guide-5bf2e-default-rtdb.asia-southeast1.firebasedatabase.app/\");\r\n        DatabaseReference r = database.getReference(\"Users\");\r\n        r.child(firebaseAuth.getUid())\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        String email = \"\" + snapshot.child(\"Email\").getValue();\r\n                        String name = \"\"+snapshot.child(\"Username\").getValue();\r\n                        String profile_img = \"\"+snapshot.child(\"profileImage\").getValue();\r\n                        String timestamp = \"\"+snapshot.child(\"timestamp\").getValue();\r\n                        String userId = \"\"+snapshot.child(\"uid\").getValue();\r\n                        String formatDate = MyApplication.formatTimeStamp(Long.parseLong(timestamp));\r\n                        String type = \"\"+snapshot.child(\"userType\").getValue();\r\n\r\n                        binding.profileEmail.setText(email);\r\n                        binding.profileUser.setText(name);\r\n                        binding.profileJoined.setText(formatDate);\r\n                        binding.profileType.setText(type);\r\n                        Glide.with(ProfileFragment.this)\r\n                                .load(profile_img)\r\n                                .placeholder(R.drawable.person)\r\n                                .into(binding.profileImg);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    // Handle the result of the image selection activity or dialog\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE_REQUEST && resultCode == RESULT_OK && data != null && data.getData() != null) {\r\n            // Get the selected image URI\r\n            Uri imageUri = data.getData();\r\n\r\n            // Upload the new image to Firebase Storage\r\n            StorageReference imageStorageRef = storageRef.child(\"images/profile.jpg\");\r\n            UploadTask uploadTask = imageStorageRef.putFile(imageUri);\r\n\r\n            uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {\r\n                @Override\r\n                public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {\r\n                    if (!task.isSuccessful()) {\r\n                        throw task.getException();\r\n                    }\r\n\r\n                    // Continue with the task to get the download URL\r\n                    return imageStorageRef.getDownloadUrl();\r\n                }\r\n            }).addOnCompleteListener(new OnCompleteListener<Uri>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<Uri> task) {\r\n                    if (task.isSuccessful()) {\r\n                        // Update the image URL in the Firebase Realtime Database\r\n                        Uri downloadUri = task.getResult();\r\n                        imageRef.setValue(downloadUri.toString());\r\n\r\n                        // Display the new profile image in the ImageView\r\n                        Picasso.get().load(downloadUri).into(profileImageView);\r\n                    } else {\r\n                        // Handle errors\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/binus/pekalongancityguide/Layout/ProfileFragment.java b/app/src/main/java/com/binus/pekalongancityguide/Layout/ProfileFragment.java
--- a/app/src/main/java/com/binus/pekalongancityguide/Layout/ProfileFragment.java	(revision d71a12823dabaf983af615333c4f811817360f51)
+++ b/app/src/main/java/com/binus/pekalongancityguide/Layout/ProfileFragment.java	(date 1678953784973)
@@ -1,14 +1,20 @@
 package com.binus.pekalongancityguide.Layout;
 
+import android.app.AlertDialog;
+import android.content.DialogInterface;
 import android.content.Intent;
 import android.net.Uri;
 import android.os.Bundle;
+import android.text.InputType;
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.Button;
+import android.widget.EditText;
+import android.widget.ImageButton;
 import android.widget.ImageView;
+import android.widget.TextView;
 
 import androidx.annotation.NonNull;
 import androidx.fragment.app.Fragment;
@@ -21,6 +27,8 @@
 import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.android.gms.tasks.Task;
 import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.auth.UserProfileChangeRequest;
 import com.google.firebase.database.DataSnapshot;
 import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
@@ -39,10 +47,12 @@
     private FirebaseAuth firebaseAuth;
     private static final String TAG = "PROFILE_TAG";
     private static final int PICK_IMAGE_REQUEST = 1;
+    private EditText profileNameEditText;
     ImageView profileImageView;
     StorageReference storageRef;
     DatabaseReference imageRef;
-
+    TextView nameTextView;
+    ImageButton editName;
 
     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
@@ -51,6 +61,8 @@
         binding = FragmentProfileBinding.inflate(inflater, container, false);
         View view = binding.getRoot();
         logout = view.findViewById(R.id.logout_btn);
+        nameTextView = view.findViewById(R.id.profile_user);
+        editName = view.findViewById(R.id.edit_name);
 
         // Retrieve a reference to the Firebase Storage
         FirebaseStorage storage = FirebaseStorage.getInstance();
@@ -72,6 +84,9 @@
         firebaseAuth = FirebaseAuth.getInstance();
         getInfo();
 
+        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();
+        String userId = currentUser.getUid();
+
         // Set OnClickListener for the profile image
         profileImageView.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -84,9 +99,13 @@
             }
         });
 
-        binding.editName.setOnClickListener(v -> {
-            //
-        });
+            editName.setOnClickListener(new View.OnClickListener() {
+                @Override
+                public void onClick(View v) {
+                    showEditNameDialog();
+                }
+            });
+
 
         binding.logoutBtn.setOnClickListener(v -> {
             startActivity(new Intent(getActivity(), MainActivity.class));
@@ -182,6 +201,46 @@
             });
         }
     }
+    private void showEditNameDialog() {
+        AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
+        builder.setTitle("Enter New Name");
+
+        // Set up the input
+        final EditText input = new EditText(getContext());
+        input.setInputType(InputType.TYPE_CLASS_TEXT);
+        builder.setView(input);
+
+        // Set up the buttons
+        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
+            @Override
+            public void onClick(DialogInterface dialog, int which) {
+                String newName = input.getText().toString();
+                updateName(newName);
+            }
+        });
+        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
+            @Override
+            public void onClick(DialogInterface dialog, int which) {
+                dialog.cancel();
+            }
+        });
+
+        builder.show();
+    }
+
+
+    private void updateName(String newName) {
+        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();
+        String userId = currentUser.getUid();
+
+        DatabaseReference database = FirebaseDatabase.getInstance().getReference();
+        database.child("users").child(userId).child("name").setValue(newName);
+
+        // Update the name in the UI
+        TextView nameTextView = getView().findViewById(R.id.profile_user);
+        nameTextView.setText(newName);
+    }
+
 
 
 }
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59__Changes_.xml	(revision d71a12823dabaf983af615333c4f811817360f51)
+++ /dev/null	(revision d71a12823dabaf983af615333c4f811817360f51)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]" date="1678341759809" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 09/03/2023 12:59 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_09_03_2023_12_59_[Changes]/shelved.patch	(revision d71a12823dabaf983af615333c4f811817360f51)
+++ /dev/null	(revision d71a12823dabaf983af615333c4f811817360f51)
@@ -1,19 +0,0 @@
-Index: app/src/main/res/layout/list_phrases.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:backgroundTint=\"@color/palette_3\"\r\n    app:cardElevation=\"8dp\"\r\n    app:cardCornerRadius=\"4dp\"\r\n    android:layout_marginHorizontal=\"5dp\"\r\n    android:layout_marginVertical=\"5dp\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_margin=\"8dp\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/phrase_img\"\r\n            android:layout_width=\"75dp\"\r\n            android:layout_height=\"75dp\"\r\n            android:src=\"@drawable/logo\"\r\n\r\n        <LinearLayout\r\n            android:layout_toEndOf=\"@+id/phrase_img\"\r\n            android:id=\"@+id/phrase_aksara\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_marginStart=\"8dp\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:gravity=\"center\"\r\n                android:text=\"Aksara\\t\\t\\t: \"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:textSize=\"18dp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/phrase_aksara_value\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:justificationMode=\"inter_word\"\r\n                android:text=\"꧋ꦱꦺꦭꦩꦠ꧀ꦥꦒꦶ\"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:textSize=\"18dp\"\r\n                android:paddingBottom=\"10dp\"\r\n                android:layout_marginStart=\"5dp\"/>\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_below=\"@+id/phrase_aksara\"\r\n            android:layout_alignStart=\"@id/phrase_aksara\"\r\n            android:id=\"@+id/phrase_latin\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:text=\"Jawa\\t\\t\\t\\t: \"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:textSize=\"18dp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/phrase_latin_value\"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:justificationMode=\"inter_word\"\r\n                android:text=\"Sugeng enjing\"\r\n                android:textSize=\"16dp\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:paddingBottom=\"5dp\"/>\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_below=\"@+id/phrase_latin\"\r\n            android:layout_alignStart=\"@id/phrase_latin\"\r\n            android:id=\"@+id/phrase_english\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:text=\"English\\t\\t: \"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:textSize=\"18dp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/phrase_english_value\"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:justificationMode=\"inter_word\"\r\n                android:text=\"Good Morning\"\r\n                android:textSize=\"16dp\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:paddingBottom=\"5dp\"/>\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_below=\"@+id/phrase_english\"\r\n            android:layout_alignStart=\"@id/phrase_english\"\r\n            android:id=\"@+id/phrase_indo\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:text=\"Bahasa\\t\\t: \"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:textSize=\"18dp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/phrase_indo_value\"\r\n                android:textColor=\"@color/palette_1\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:justificationMode=\"inter_word\"\r\n                android:text=\"Selamat pagi\"\r\n                android:textSize=\"16dp\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:paddingBottom=\"5dp\"/>\r\n\r\n        </LinearLayout>\r\n\r\n    </RelativeLayout>\r\n\r\n</androidx.cardview.widget.CardView>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/list_phrases.xml b/app/src/main/res/layout/list_phrases.xml
---- a/app/src/main/res/layout/list_phrases.xml	(revision ecbbf9d245a26d17bb9f45af90a43ec680fbda35)
-+++ b/app/src/main/res/layout/list_phrases.xml	(date 1678338106052)
-@@ -18,7 +18,7 @@
-             android:id="@+id/phrase_img"
-             android:layout_width="75dp"
-             android:layout_height="75dp"
--            android:src="@drawable/logo"
-+            android:src="@drawable/logo"/>
- 
-         <LinearLayout
-             android:layout_toEndOf="@+id/phrase_img"
